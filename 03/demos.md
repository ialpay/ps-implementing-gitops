# Module 3 Commands: Working with GitOps Tooling

## Clip 2: Demo: Deploying ArgoCD ApplicationSets

Display ApplicationSet configuration:
```bash
cat argocd/applicationsets/globomantics-appset.yaml
```

Apply the ApplicationSet:
```bash
kubectl apply -f argocd/applicationsets/globomantics-appset.yaml
```

List ApplicationSets:
```bash
argocd appset list
```

List applications generated by ApplicationSet:
```bash
argocd app list
```

Sync development environment application:
```bash
argocd app sync globomantics-app-dev
```

Sync staging environment application:
```bash
argocd app sync globomantics-app-staging
```

Sync production environment application:
```bash
argocd app sync globomantics-app-prod
```

Delete the ApplicationSet:
```bash
kubectl delete -f argocd/applicationsets/globomantics-appset.yaml
```

Delete all environment namespaces:
```bash
kubectl delete ns globomantics-staging globomantics-dev globomantics-prod
```

## Clip 3: Demo: Installing and Configuring FluxCD

Delete existing Kind cluster:
```bash
kind delete cluster --name=gitops
```

Create new Kind cluster:
```bash
kind create cluster --name=gitops
```

(Option 1) Install Flux CLI using Homebrew:
```bash
brew install fluxcd/tap/flux
```

(Option 2) Install Flux CLI using curl:
```bash
curl -s https://fluxcd.io/install.sh | sudo bash
```

Check Flux version:
```bash
flux --version
```

Check cluster prerequisites for Flux:
```bash
flux check --pre
```

Bootstrap Flux with GitHub repository:
```bash
flux bootstrap github \
  --owner=CodeWithPraveen \
  --repository=ps-implementing-gitops \
  --branch=main \
  --path=./clusters/prod \
  --personal
```

Clone the Git repository:
```bash
git clone https://github.com/CodeWithPraveen/ps-implementing-gitops.git
```

Change to repository directory:
```bash
cd ps-implementing-gitops
```

Display Git source configuration:
```bash
cat clusters/prod/source.yaml
```

Display Kustomization configuration:
```bash
cat clusters/prod/kustomization.yaml
```

Apply Git source:
```bash
kubectl apply -f clusters/prod/source.yaml
```

Apply Kustomization:
```bash
kubectl apply -f clusters/prod/kustomization.yaml
```

List Git sources and their status:
```bash
flux get sources git
```

List Kustomizations and their status:
```bash
flux get kustomizations
```

List all namespaces:
```bash
kubectl get namespaces
```

List all resources in Flux system namespace:
```bash
kubectl get all -n flux-system
```